{% extends "base.html" %}
{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="/static/lib/jquery-datatables/css/dataTables.bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/static/datatables/css/dataTables.bootstrap.extra.css" />
<link rel="stylesheet" type="text/css" href="/static/lib/jquery-datatables/css/dataTables.colReorder.css" />
<link rel="stylesheet" type="text/css" href="/static/lib/jquery-datatables/css/dataTables.colVis.css" />
<link rel="stylesheet" type="text/css" href="/static/lib/jquery-datatables/css/dataTables.fontAwesome.css" />
<link rel="stylesheet" href="/static/dataq/css/style.css">
{% endblock stylesheets %}
{% block content %}
<div class="container">
   <h4> Guide to using ShareDB: Privacy Profiles</h4>
   <ul class="list-group list-group-flush">
      <li class="list-group-item"><b style="display:inline-block;"> To create a new Privacy Profile and specify controls over your data set select 'Create New Privacy Profile'</b> </li>
      <li class="list-group-item"><b style="display:inline-block;"> To browse existing Privacy Profiles (made by you or other users) and add one to this data set select 'Add Existing Privacy Profile' and click 'Add' after selecting the desired Privacy Profile</b> </li>
   </ul>
   <hr />
   <br />
   <p class="lead">Add Privacy Profiles </p>
   <h4> Create or change data privacy specifications for your data sets. </h4>
   <form action="{% url 'privacy_profiles_create' repo_base repo %}">
      <button type="submit" title="Create a License"  class="btn btn-primary" style="margin:10px;"> Create New Privacy Profile</button>
   </form>
   <div><button type="button"
      class="btn btn-primary" data-toggle="modal" data-target="#newLicenseModal" style="margin:10px;"">Add Existing Privacy Profile</button></div>
   
   <!--Add Privacy Profile Modal -->
   <div class="modal fade" id="newLicenseModal" role="dialog">
      <div class="modal-dialog">
         <!-- Modal content-->
         <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Choose Privacy Profile {{all_licensess}}</h4>
            </div>
            <div class="modal-body">
               <!--   <div id="license-model-body-choose"> -->
               <!-- <div class="table-responsive table-container"> -->
               <table id="table_data" class="table table-condensed table-bordered ">
                  <thead>
                     <tr>
                        <th> License ID </th>
                        <th> Name </th>
                        <th> PII Def </th>
                        <th> PII Anonymized </th>
                        <th> PII Removed </th>
                        <th> Link To Repo </th>
                     </tr>
                  </thead>
                  <tbody>
                     {% for license in all_licenses %}
                     License: {{license.license_name}} {{license.pii_def}}
                     <tr id="license_{{license.license_id}}">
                        {% for cell in license %}
                        <td class="strong">{{cell}}</td>
                        {% endfor %}
                        <td>
                           <a type="button" href="/licenses/{{repo_base}}/{{repo}}/linklicense/{{license.license_id}}/" class="btn btn-primary" style="margin-top:12px; margin-left:50px;"> Add </a>
                        </td>
                     </tr>
                     {% endfor %}
                  </tbody>
               </table>
               <br />
            </div>
            <div class="modal-footer">
            </div>
         </div>
      </div>
   </div>
</div>
{% endblock content %}
{% block js %}
<!-- dataq -->
<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.runtime.js"></script>
<script src="/static/dataq/templates.js"></script>
<script src="/static/dataq/js/dataq.min.js"></script>
<script type="text/javascript" src="/static/lib/d3/d3.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
<!-- /dataq -->
<!-- sentiment -->
<script src="/static/sentiment/sentiment.js"></script>
<!-- /sentiment -->
<!-- dataTables -->
<script src="/static/lib/jquery-datatables/jquery.dataTables.js"></script>
<script src="/static/lib/jquery-datatables/dataTables.bootstrap.js"></script>
<script src="/static/lib/jquery-datatables/dataTables.colReorder.js"></script>
<script src="/static/lib/jquery-datatables/dataTables.colVis.js"></script>
<script src="/static/datatables/js/dataTables.extra.js"></script>
<!-- /dataTables -->
<script>
   function bindAnnotationModal() {
     $('.annotation-modal-dialog').on('click', function(e) {
       var modal_id = $(this).attr('target-modal')
       var title = $(this).attr('title')
       var placeholder = $(this).attr('placeholder')
       var url_path = $(this).attr('url-path')
   
       $(modal_id + '-title').text(title)
       $(modal_id + '-input-annotation').val(placeholder)
       $(modal_id + '-input-url').val(url_path)
   
       $(modal_id).off('click');
   
       $(modal_id).modal({
         keyboard: true
       })
       .on('click', modal_id + '-operation', function(e) {
         $("#frm-annotation").submit()
         $(modal_id).modal('hide')
         $("#wait-dialog").modal()
       });
     });
   }
   
   function bindDataQ() {
     $(document).on("click", "#btn-dataq", function(e) {
       e.preventDefault();
       DataQ.DQ("{{repo}}", function(query) {
         $("#txt-sql").val(query);
       });
     });
   }
   
   $(document).ready(function() {
      $(document).on("click", "#choose-existing-btn", function(e) {
       e.preventDefault();
       
       $("#license-model-body-choose").hide()
       $("#license-model-body-existing").show();
     });
   });
</script>
{% endblock js%}